Desenvolvimento de um projeto para clinicas m√©dicas

##  Sobre o Projeto

O **Cl√≠nica Essencial** √© um sistema moderno de gest√£o para cl√≠nicas m√©dicas que oferece funcionalidades completas para:

- **Gest√£o de Pacientes** - Cadastro e hist√≥rico completo
- **Gest√£o de Parceiros** - Profissionais ou parceiros que prestam servi√ßos para a clinica
- **Agendamentos** - Sistema completo com calend√°rio e agenda por salas
- **Produtos/Servi√ßos** - Cat√°logo de produtos e servi√ßos com controle de estoque para produtos
- **Salas** - Gest√£o de consult√≥rios e espa√ßos
- **Financeiro** - Contas a pagar e a receber e acerto com o paciente e parceiros (prestadores de servi√ßos)
- **Configura√ß√µes** - Hor√°rios de funcionamento personaliz√°veis
- **Relat√≥rios** - Estat√≠sticas e an√°lises


## üõ†Ô∏è Tecnologias Utilizadas

#### Backend
- **Node.js**: Runtime
- **Fastify**: Framework web (escolhido por performance)
- **Prisma**: ORM
- **PostgreSQL**: Banco de dados principal
  - Host: alav.cloud
  - Porta: 5432
  - Database: clinica_demo_2
  - Username: ivan
- **Redis**: Cache e sess√µes (opcional)
- **JWT**: Autentica√ß√£o

### Frontend
- ** shadcn 19 + vite + tailwind CSS 4
- O sistema deve conter paleta de cores e tema claro e escuro
- O sistema deve ser ajustado para funcionar tanto desktop quanto em celular

### Importante
Backend First Approach
Todas as tarefas agora come√ßam implementando o backend completo
Cada m√≥dulo inclui cria√ß√£o de seeds de dados de teste no banco
APIs s√£o desenvolvidas e testadas antes do frontend
Conex√£o Imediata Frontend-Backend
Frontend sempre consome dados reais da API
Nunca usa dados fake ou mockados no frontend
React Query configurado para cache e sincroniza√ß√£o
Integra√ß√£o imediata entre frontend e backend
Fluxo de Desenvolvimento
Backend + Seeds ‚Üí Criar API completa com dados de teste
Frontend Conectado ‚Üí Interface consumindo dados reais imediatamente
Testes ‚Üí Validar integra√ß√£o completa
Benef√≠cios desta Abordagem
Dados Consistentes: Sempre trabalhando com dados reais
Integra√ß√£o Cont√≠nua: Problemas de integra√ß√£o descobertos cedo
Desenvolvimento Realista: Frontend desenvolvido com dados reais desde o in√≠cio
Menos Retrabalho: N√£o precisa refatorar depois para conectar APIs
Agora cada m√≥dulo garante que o backend esteja funcionando com dados reais antes de conectar o frontend, eliminando a necessidade de dados fake no frontend.


## üéØ Funcionalidades Principais

### üë• Gest√£o de Pacientes
- **Cadastro Completo** - Dados pessoais como nome completo, cpf, data nascimento, contatos (wastapp, fixo, e-mail), endere√ßo e observa√ß√µes
- **Hist√≥rico** - Agendamentos e atendimentos
- **Busca Avan√ßada** - Filtros e pesquisa
- **Cadastro R√°pido** - Modal para agendamentos - permitir o cadastro do paciente no momento do agendamento.

### üè• Gest√£o de Salas
- **Cadastro Completo** - nome da sala, descri√ß√£o, recursos da sala (maca, armario, luz focal, etc)
- **Status de Disponibilidade** - Ativo/Inativo

### üè• Categoria de produto e servi√ßo
- **Cadastro Completo** - nome, tipo (produto/servi√ßo), status (ativo, inativo), descri√ß√£o (opcional)
- **Status de Disponibilidade** - Ativo/Inativo

### üè• Produtos e servi√ßos
- **Cadastro Completo** - nome, tipo (produto/servi√ßo), categoria (permitir adicionar nova categoria), c√≥digo interno, status (ativo, inativo), descri√ß√£o, pre√ßos (pre√ßo de venda, pre√ßo de custo, pre√ßo do parceiro), configura√ß√µes espec√≠ficas ( dura√ß√£o em minutos, salas dispon√≠veis - exibir todas as salas para selecionar (checkbox)), dispon√≠vel para agendamento (checkbox), requer preparo especial (checkbox - se sim exibir um textarea para detalhar), observa√ß√£oes (exemplo: agulhas descartaveis inclu√≠das)
- **Status de Disponibilidade** - Ativo/Inativo
- **controle de estoque para produtos** - controle de estoque simples para os produtos


### M√≥dulo de Gest√£o de Parceiros (Profissionais):
* **Cadastro de Parceiros:**
    * **Campos:** Nome completo, CPF/CNPJ, telefone de contato, e-mail.
    * Endere√ßo (se aplic√°vel).
    * Dados banc√°rios para repasses (incluir o pix)
* **Configura√ß√£o de Disponibilidade:**
    * Interface visual para definir dias de atendimento (Segunda a Domingo).
    * Hor√°rios de in√≠cio e fim para cada dia da semana (com possibilidade de intervalos). Exemplo; segunda-feira das 8 as 11 horas e das 13 as 16hs.
    * Bloqueio de datas/hor√°rios espec√≠ficos (f√©rias, imprevistos).
    * ***Requisito Cr√≠tico:*** *Acesso facilitado e claro desta informa√ß√£o para a equipe de atendimento durante o agendamento.*
* **Associa√ß√£o de Servi√ßos:**
    * Selecionar quais servi√ßos da cl√≠nica o parceiro est√° habilitado e oferece.
    * Definir valores espec√≠ficos por servi√ßo/parceiro, se necess√°rio (para casos de porcentagem).
* **Tipos de Parceria e L√≥gica Financeira:**
    * **Subloca√ß√£o:**
        * Registrar valor da subloca√ß√£o e dia de vencimento do pagamento √† cl√≠nica.
        * Sistema deve gerar lembrete/registro no contas a receber da cl√≠nica.
        * Paciente paga diretamente ao parceiro; a cl√≠nica n√£o intermedia o pagamento do paciente.
    * **Porcentagem:**
        * Registrar o valor fixo a ser pago pela cl√≠nica ao parceiro por cada servi√ßo prestado.
        * Paciente paga √† cl√≠nica.
        * Sistema deve calcular o valor a ser repassado ao parceiro e lan√ßar no contas a pagar da cl√≠nica ap√≥s o atendimento.
    * **Porcentagem com Produto do Parceiro:**
        * Parceiro utiliza espa√ßo da cl√≠nica e seus pr√≥prios produtos.
        * Paciente paga diretamente ao parceiro.
        * Parceiro informa √† cl√≠nica o valor do servi√ßo e o lucro obtido.
        * Sistema deve permitir o registro desse lucro e calcular o percentual (pr√©-combinado) a ser repassado pelo parceiro √† cl√≠nica, lan√ßando no contas a receber da cl√≠nica.


### Configura√ß√µes do sistema:
* **Hor√°rios de funcionamento da cl√≠nica** - Configurar os hor√°rios de funcionamento da clinica por dia da semana. Importante para o agendamento (ao abrir a agenda). exemplo: segunda-feira da 7:00 as 12:oras e das 14:00hs a 18:00hs.
* **Regras de agendamento** - Permitir movimenta√ß√£o de agendamentos conclu√≠dos
Se ativado, administradores e recepcionistas poder√£o mover agendamentos j√° conclu√≠dos para outro dia/hor√°rio. √ötil para ajustes administrativos, mas pode impactar o hist√≥rico de atendimentos.
Permitir movimenta√ß√£o de agendamentos cancelados
Se ativado, ser√° poss√≠vel mover agendamentos cancelados para outro dia/hor√°rio. Recomendado apenas para casos de reabertura ou corre√ß√£o de lan√ßamentos.
* **Notifica√ß√£o usuario** - por sms e whastapp

### M√≥dulo de Agendamento e Atendimento:
* **Interface de Agendamento:**
    * Calend√°rio visual (di√°rio, semanal, mensal) com filtros por profissional, sala, tipo de servi√ßo.
    * Visualiza√ß√£o alternativa por salas (timeline de ocupa√ß√£o das salas).
    * ***Requisito Cr√≠tico:*** *Exibi√ß√£o clara e imediata da disponibilidade dos profissionais (conforme cadastro no m√≥dulo de parceiros) para evitar erros de marca√ß√£o.*
    * Indica√ß√£o de hor√°rios ocupados e livres.
* **Funcionalidades de Agendamento:**
    * Marcar nova consulta (selecionar paciente, servi√ßo, profissional, sala ‚Äì se aplic√°vel, data, hora).
    * Identificar se √© consulta nova ou retorno.
    * Desmarcar/Cancelar agendamento (com registro de motivo, se poss√≠vel).
    * Remarcar agendamento.
    * Lista de espera para hor√°rios/profissionais concorridos (opcional).
* **Lembretes Autom√°ticos:**
    * Configura√ß√£o para envio de lembretes aos pacientes via WhatsApp, sms e/ou e-mail (X horas/dias antes da consulta).
    * Confirma√ß√£o de presen√ßa (opcional, com resposta do paciente atualizando o status do agendamento).
* **Registro de Atendimento (Check-in/Checkout):**
    * Marcar presen√ßa do paciente (check-in).
    * Registrar observa√ß√µes do atendimento.
    * Permitir o fechamento/pagamento do atendimento.
    * Integra√ß√£o com o m√≥dulo financeiro para lan√ßamento autom√°tico da receita (quando o paciente paga √† cl√≠nica) e das comiss√µes/repasses (para parceiros).
* **atendimento:** - √© importante que a recepcionista consigua acessar de forma facilitada a disponibilidade de horarios de um parceiro, bem como os horarios ocupados e suas especialidades. 
* **Notifica√ß√£o:** - o usuario deve ser notificado 3 vezes (conforme configura√ß√£o) da consulta.

### M√≥dulo Financeiro:
* **Gest√£o de Contas:**
    * Cadastro de contas banc√°rias e caixa interno da cl√≠nica.
    * **Campos:** Nome da conta, banco, ag√™ncia, n√∫mero da conta, saldo inicial.
    * ***Requisito Cr√≠tico para Saldo Inicial:*** *O sistema deve permitir que o saldo inicial de uma conta seja ajustado dinamicamente com base na data do primeiro lan√ßamento. Ex: se o primeiro lan√ßamento de uma conta nova √© em 10/04/2025, o saldo inicial informado deve ser considerado para essa data. Se um lan√ßamento √© editado para uma data anterior a todos os outros existentes, o saldo inicial deve "mover-se" para essa nova data mais antiga.*
* **Lan√ßamentos Financeiros:**
    * Registro de Contas a Pagar e Contas a Receber.
    * **Campos:** Data de vencimento, data de pagamento/recebimento, descri√ß√£o, valor, conta associada, paciente/fornecedor/parceiro associado, status (pendente, pago, vencido).
    * Permitir lan√ßamentos retroativos e futuros, com rec√°lculo autom√°tico dos saldos subsequentes da conta.
* **Classifica√ß√£o de Lan√ßamentos:**
    * Categorias de receitas (ex: Consulta Medicina, Sess√£o Acupuntura, Venda Produto X).
    * Categorias de despesas (ex: Aluguel, Marketing, Materiais de consumo, Repasse Parceiro).
    * Centros de custo/lucro (opcional, ex: por tipo de servi√ßo, por parceiro).
    * Talvez uma configura√ß√£o da categoria para parceiros e subloca√ß√£o. Isso para o moment do acerto de contas o lan√ßamento conhe√ßa em qual conta deve lan√ßar automaticamente.
* **Acerto com Parceiros:**
    * Gera√ß√£o autom√°tica de lan√ßamentos no contas a pagar (para parceiros tipo "Porcentagem") ou contas a receber (para parceiros tipo "Subloca√ß√£o" ou "Porcentagem com produto do parceiro") com base nos atendimentos registrados e no tipo de parceria.
    * Relat√≥rio de repasses a serem feitos/recebidos por parceiro.
* **Gest√£o de Pagamentos:**
    * Formas de pagamento (Dinheiro, Cart√£o de Cr√©dito/D√©bito, PIX, Boleto).
    * Registro de pagamentos parciais.
    
* **Rec√°lculo de Saldos:**
    * Sempre que um lan√ßamento for adicionado, editado, exclu√≠do, revertido ou cancelado, os saldos da conta afetada e os saldos futuros devem ser recalculados automaticamente.
* **Relat√≥rios Financeiros B√°sicos:**
    * Fluxo de Caixa (di√°rio, semanal, mensal).
    * Demonstrativo de Resultados do Exerc√≠cio (DRE) simplificado.
    * Contas a pagar/receber por per√≠odo.
    * Contas a pagar/receber por conta (banco)


### Dashboard: